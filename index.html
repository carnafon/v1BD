<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title> Oihane & Ander ‚Äî 6 de junio de 2026</title>
  <meta name="description" content="Confirmaci√≥n de asistencia a la boda de Oihane y Ander. 6 de junio de 2026 ¬∑ Amorebieta ¬∑ Restaurante Boroa">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/styles.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
  <style>#map{height:340px;border:1px solid var(--border);border-radius:.8rem}</style>
</head>
<body>
  <header class="header-hero">
    <img class="hero-img" src="/assets/hero.jpg" alt="Oihane & Ander">
    <div class="hero-overlay"></div>
    <div class="hero-inner">
      <h1 class="hero-title">Oihane <br>&<br> Ander</h1>
      <p class="hero-sub">6 de junio de 2026</p>
      <p class="hero-meta">Amorebieta ¬∑ Restaurante Boroa</p>
      <div id="countdown-timer" class="countdown-container">
        <!-- El JS llenar√° esto -->
      </div>
    </div>
  </header>

  <nav class="navbar">
    <button class="menu-toggle" aria-controls="main-menu" aria-expanded="false" aria-label="Toggle navigation">
      <span class="bar"></span>
      <span class="bar"></span>
      <span class="bar"></span>
    </button>
    <div class="navbar-inner" id="main-menu">
      <a href="#welcome">Bienvenida</a>
      <a href="#info">Informaci√≥n</a>
      <a href="#rsvp">RSVP</a>
      <a href="#galeria">Galer√≠a</a>
      <a href="#regalos">Regalos</a>
    </div>
  </nav>
  
  <main>
    <section id="welcome">
      <div class="card">
        <h2>¬°Bienvenidos!</h2>
        <p class="lead">Nos hace much√≠sima ilusi√≥n celebrar este d√≠a con vosotros!</p>
      </div>
    </section>

    <section id="info">
      <div class="card grid grid-2">
        <div class="banner">
          <div class="content">
            <h2>Informaci√≥n clave</h2>
            <p class="lead">
              La ceremonia y el banquete tendr√°n lugar en el <strong>Restaurante Boroa</strong>.
              Para vuestra comodidad, hemos organizado autobuses para el trayecto.
            </p>
          </div>
        </div>
        <div>
          <p>
            <strong>Ceremonia y Banquete</strong>
            <br>
            <span class="small">S√°bado, 6 de junio de 2026 a las 17:00</span>
            <br>
            <a href="https://maps.app.goo.gl/uXp5h6GkHqL2qGkP9" target="_blank">
              Restaurante Boroa
              <br>
              Barrio Boroa, 11
              <br>
              48340 Amorebieta, Bizkaia
            </a>
          </p>
          <h3>Autobuses</h3>
          <p>
            Habr√° servicio de autob√∫s tanto a la ida como a la vuelta desde dos puntos.
            <br>
            La salida de los autobuses es a las <strong>16:15</strong>. ¬°S√© puntual!
          </p>
          <ul style="list-style: none; padding: 0;">
            <li><a href="https://maps.app.goo.gl/U161P3rXm2N5qKqD8" target="_blank" style="display:flex; gap:0.5rem; align-items:center;"> Estaci√≥n de Autobuses de Bilbao</a></li>
            <li><a href="https://maps.app.goo.gl/9tH7YwW2V9b2y7k87" target="_blank" style="display:flex; gap:0.5rem; align-items:center;"> Parada de autob√∫s de Durango (Plaza Ezkurdi)</a></li>
          </ul>
        </div>
      </div>
    </section>

    <section id="map">
      <div id="map"></div>
    </section>

    <section id="rsvp">
      <div class="card">
        <h2 id="form-title">Confirmar asistencia</h2>
        <p class="lead">
          Por favor, confirma tu asistencia antes del <strong>1 de abril de 2026</strong>.
        </p>
        <form name="boda-2026" id="rsvp-form" method="POST" action="/.netlify/functions/submit-form">
          <input type="hidden" name="form-name" value="boda-2026" />
          <div class="full">
            <label for="nombre">Nombre y Apellidos</label>
            <input type="text" id="nombre" name="nombre" placeholder="Juan P√©rez" required>
            <span class="hint">Introduce tu nombre completo para identificar tu confirmaci√≥n.</span>
          </div>
          <div class="full">
            <label for="email">Email</label>
            <input type="email" id="email" name="email" placeholder="juan.perez@email.com" required>
            <span class="hint">Para que podamos contactar contigo si es necesario.</span>
          </div>
          <div class="full">
            <label for="asistencia">¬øConfirmas tu asistencia?</label>
            <select id="asistencia" name="asistencia" required>
              <option value="">Selecciona una opci√≥n</option>
              <option value="si">S√≠, asistir√©</option>
              <option value="no">No podr√© asistir</option>
            </select>
          </div>
          <div class="full hidden" id="menu-options">
            <label for="menu">Restricci√≥n alimentaria / Alergia</label>
            <textarea id="menu" name="menu" placeholder="Ej: al√©rgico al gluten, vegetariano..."></textarea>
          </div>
          <div class="full hidden" id="guest-options">
            <label for="acompanantes">¬øCu√°ntos acompa√±antes vendr√°n contigo?</label>
            <select id="acompanantes" name="acompanantes">
              <option value="0">0</option>
              <option value="1">1</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
            </select>
          </div>
          <div class="full hidden" id="guests-container">
            <!-- Guests will be added here dynamically -->
          </div>
          <div class="full actions">
            <button type="submit">Enviar confirmaci√≥n</button>
          </div>
        </form>
      </div>
    </section>

    <section id="galeria">
      <div class="card">
        <h2>Galer√≠a de fotos</h2>
        <p class="lead">
          Un peque√±o √°lbum de fotos para que revivas nuestros momentos m√°s especiales.
        </p>
        <div class="gallery">
          <figure>
            <img src="/assets/gallery/foto1.jpg" alt="Ander y Oihane en un viaje">
          </figure>
          <figure>
            <img src="/assets/gallery/foto2.jpg" alt="Ander y Oihane en una cena rom√°ntica">
          </figure>
          <figure>
            <img src="/assets/gallery/foto3.jpg" alt="Ander y Oihane en la playa">
          </figure>
          <figure>
            <img src="/assets/gallery/foto4.jpg" alt="Ander y Oihane disfrutando del atardecer">
          </figure>
          <figure>
            <img src="/assets/gallery/foto5.jpg" alt="Ander y Oihane en un concierto">
          </figure>
          <figure>
            <img src="/assets/gallery/foto6.jpg" alt="Ander y Oihane en el campo">
          </figure>
        </div>
      </div>
    </section>

    <section id="regalos">
      <div class="card">
        <h2>Regalos</h2>
        <p class="lead">
          Vuestra presencia en nuestro d√≠a ya es el mejor de los regalos. Si aun as√≠ quer√©is tener un detalle, pod√©is hacerlo a trav√©s del siguiente n√∫mero de cuenta.
        </p>
        <p>
          <strong class="iban">ES99 1234 5678 9012 3456 7890</strong>
        </p>
        <p class="small">
          <button class="copy">Copiar IBAN</button>
        </p>
      </div>
    </section>
  </main>

  <footer>
    <p class="small">¬© 2026 Oihane & Ander. Todos los derechos reservados.</p>
  </footer>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-23K6z+aP+Kk6o9VlY3h6eH7G6D8Jv15g2G6D8Jv15g2G6" crossorigin=""></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Countdown Timer
      const countdown = document.getElementById('countdown-timer');
      const eventDate = new Date('2026-06-06T17:00:00');

      function updateCountdown() {
        const now = new Date();
        const diff = eventDate - now;

        const days = Math.floor(diff / (1000 * 60 * 60 * 24));
        const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));

        countdown.innerHTML = `
          <div class="countdown-box">
            <span class="countdown-value">${days}</span>
            <span class="countdown-label">D√≠as</span>
          </div>
          <div class="countdown-box">
            <span class="countdown-value">${hours}</span>
            <span class="countdown-label">Horas</span>
          </div>
          <div class="countdown-box">
            <span class="countdown-value">${minutes}</span>
            <span class="countdown-label">Minutos</span>
          </div>
        `;

        if (diff < 0) {
          clearInterval(timerInterval);
          countdown.innerHTML = "¬°Ya estamos casados!";
        }
      }
      
      const timerInterval = setInterval(updateCountdown, 1000);
      updateCountdown();

      // Map
      const map = L.map('map').setView([43.2384, -2.7161], 15);
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
      }).addTo(map);

      // Restaurante Boroa
      L.marker([43.2384, -2.7161], {
        icon: L.divIcon({
          className: 'pin',
          html: 'üíç'
        })
      }).addTo(map)
        .bindPopup('<b>Restaurante Boroa</b><br>Ceremonia y banquete.')
        .openPopup();
      
      // Autob√∫s Bilbao
      L.marker([43.2625, -2.9348], {
        icon: L.divIcon({
          className: 'pin pin-bus',
          html: 'üöå'
        })
      }).addTo(map)
        .bindPopup('<b>Autob√∫s Bilbao</b><br>Estaci√≥n de Autobuses de Bilbao.');

      // Autob√∫s Durango
      L.marker([43.1764, -2.6323], {
        icon: L.divIcon({
          className: 'pin pin-bus',
          html: 'üöå'
        })
      }).addTo(map)
        .bindPopup('<b>Autob√∫s Durango</b><br>Parada de autob√∫s de Durango.');
        
      // RSVP form logic
      const rsvpFormEl = document.getElementById('rsvp-form');
      const asistenciaSelect = document.getElementById('asistencia');
      const menuOptions = document.getElementById('menu-options');
      const guestOptions = document.getElementById('guest-options');
      const guestsContainer = document.getElementById('guests-container');
      const numAcompanantesSelect = document.getElementById('acompanantes');
      const formTitle = document.getElementById('form-title');
      const nombreInput = document.getElementById('nombre');
      const copyButton = document.querySelector('.copy');

      asistenciaSelect.addEventListener('change', (e) => {
        const value = e.target.value;
        if (value === 'si') {
          menuOptions.classList.remove('hidden');
          guestOptions.classList.remove('hidden');
        } else {
          menuOptions.classList.add('hidden');
          guestOptions.classList.add('hidden');
        }
      });
      
      numAcompanantesSelect.addEventListener('change', (e) => {
        const num = parseInt(e.target.value, 10);
        guestsContainer.innerHTML = '';
        if (num > 0) {
          guestsContainer.classList.remove('hidden');
          for (let i = 1; i <= num; i++) {
            const guestCard = document.createElement('div');
            guestCard.classList.add('card', 'guest-card');
            guestCard.innerHTML = `
              <h4>Acompa√±ante ${i}</h4>
              <div class="full">
                <label for="acompanante-nombre-${i}">Nombre completo</label>
                <input type="text" id="acompanante-nombre-${i}" name="acompanante_nombre_${i}" required>
              </div>
              <div class="full">
                <label for="acompanante-menu-${i}">Restricci√≥n alimentaria / Alergia</label>
                <textarea id="acompanante-menu-${i}" name="acompanante_menu_${i}" placeholder="Ej: al√©rgico al gluten, vegetariano..."></textarea>
              </div>
            `;
            guestsContainer.appendChild(guestCard);
          }
        } else {
          guestsContainer.classList.add('hidden');
        }
      });
      
      nombreInput.addEventListener('input', (e) => {
        const name = e.target.value.trim();
        if (name) {
          formTitle.textContent = `${name}`;
        } else {
          formTitle.textContent = 'Confirmar asistencia';
        }
      });
      
      // Manejar el env√≠o del formulario con JavaScript
      rsvpFormEl.addEventListener('submit', async (e) => {
        e.preventDefault(); // Evita el env√≠o tradicional del formulario
        const formData = new FormData(rsvpFormEl);
        const data = {};
        for (let [key, value] of formData.entries()) {
            data[key] = value;
        }

        // Convertir a JSON y enviar
        try {
            const response = await fetch(rsvpFormEl.action, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data),
            });

            if (response.ok) {
                window.location.href = '/gracias.html';
            } else {
                console.error('Error en el servidor:', await response.text());
                // Reemplazando alert() con un mensaje en la UI
                const errorMessage = document.createElement('p');
                errorMessage.textContent = 'Error al enviar el formulario. Por favor, int√©ntalo de nuevo.';
                errorMessage.style.color = 'red';
                rsvpFormEl.prepend(errorMessage);
            }
        } catch (error) {
            console.error('Error de red:', error);
            // Reemplazando alert() con un mensaje en la UI
            const errorMessage = document.createElement('p');
            errorMessage.textContent = 'Error al enviar el formulario. Por favor, int√©ntalo de nuevo.';
            errorMessage.style.color = 'red';
            rsvpFormEl.prepend(errorMessage);
        }
      });
      
      // Copy IBAN to clipboard
      if (copyButton) {
          copyButton.addEventListener('click', () => {
              const iban = document.querySelector('.iban').textContent.trim();
              const tempInput = document.createElement('input');
              tempInput.value = iban;
              document.body.appendChild(tempInput);
              tempInput.select();
              document.execCommand('copy');
              document.body.removeChild(tempInput);
              copyButton.textContent = '¬°Copiado!';
              setTimeout(() => {
                  copyButton.textContent = 'Copiar IBAN';
              }, 2000);
          });
      }
      
      // Toggle mobile menu
      const menuToggle = document.querySelector('.menu-toggle');
      const mainMenu = document.getElementById('main-menu');
      if (menuToggle && mainMenu) {
        menuToggle.addEventListener('click', () => {
          const isExpanded = menuToggle.getAttribute('aria-expanded') === 'true';
          menuToggle.setAttribute('aria-expanded', !isExpanded);
          mainMenu.classList.toggle('is-open', !isExpanded);
        });
      }
    });
  </script>
</body>
</html>
